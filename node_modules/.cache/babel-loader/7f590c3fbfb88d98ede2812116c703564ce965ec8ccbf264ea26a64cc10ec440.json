{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alfon\\\\src\\\\components\\\\ColorAnalyzer.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback } from 'react';\nimport { Box, Typography, Paper, CircularProgress, IconButton, Alert } from '@mui/material';\nimport { useDropzone } from 'react-dropzone';\nimport CloudUploadIcon from '@mui/icons-material/CloudUpload';\nimport ClearIcon from '@mui/icons-material/Clear';\nimport ColorRecommendations from './ColorRecommendations.tsx';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ColorAnalyzer = () => {\n  _s();\n  const [image, setImage] = useState(null);\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  const [colorPalette, setColorPalette] = useState(null);\n  const [error, setError] = useState(null);\n  const handleRemoveImage = () => {\n    setImage(null);\n    setColorPalette(null);\n    setError(null);\n  };\n  const rgbToHsl = (r, g, b) => {\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    const max = Math.max(r, g, b);\n    const min = Math.min(r, g, b);\n    let h = 0;\n    let s = 0;\n    const l = (max + min) / 2;\n    if (max !== min) {\n      const d = max - min;\n      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n      switch (max) {\n        case r:\n          h = (g - b) / d + (g < b ? 6 : 0);\n          break;\n        case g:\n          h = (b - r) / d + 2;\n          break;\n        case b:\n          h = (r - g) / d + 4;\n          break;\n      }\n      h /= 6;\n    }\n    return {\n      h: h * 360,\n      s: s * 100,\n      l: l * 100\n    };\n  };\n  const rgbToHex = (r, g, b) => {\n    return '#' + [r, g, b].map(x => {\n      const hex = x.toString(16);\n      return hex.length === 1 ? '0' + hex : hex;\n    }).join('');\n  };\n  const getColorName = (h, s, l) => {\n    // Basic color naming logic\n    if (l < 20) return 'Black';\n    if (l > 80) return 'White';\n    if (s < 20) return l > 50 ? 'Light Gray' : 'Dark Gray';\n    const hue = h;\n    if (hue >= 0 && hue < 30) return 'Red';\n    if (hue >= 30 && hue < 60) return 'Orange';\n    if (hue >= 60 && hue < 90) return 'Yellow';\n    if (hue >= 90 && hue < 150) return 'Green';\n    if (hue >= 150 && hue < 210) return 'Cyan';\n    if (hue >= 210 && hue < 270) return 'Blue';\n    if (hue >= 270 && hue < 330) return 'Purple';\n    return 'Red';\n  };\n  const determineUndertone = dominantHues => {\n    const avgHue = dominantHues.reduce((a, b) => a + b, 0) / dominantHues.length;\n    return avgHue < 180 ? 'Warm' : 'Cool';\n  };\n  const determineSeasonType = (undertone, brightness, saturation) => {\n    if (undertone === 'Warm') {\n      return brightness > 50 ? saturation > 50 ? 'Spring' : 'Spring-Summer' : saturation > 50 ? 'Autumn' : 'Autumn-Winter';\n    } else {\n      return brightness > 50 ? saturation > 50 ? 'Summer' : 'Spring-Summer' : saturation > 50 ? 'Winter' : 'Autumn-Winter';\n    }\n  };\n  const generateHarmonizedPalette = (baseHue, undertone) => {\n    const palette = [];\n    const hueStep = undertone === 'Warm' ? 30 : 45;\n    for (let i = 0; i < 5; i++) {\n      const hue = (baseHue + i * hueStep) % 360;\n      const saturation = 65 + Math.random() * 20;\n      const lightness = 45 + Math.random() * 25;\n      const [r, g, b] = hslToRgb(hue / 360, saturation / 100, lightness / 100);\n      palette.push(rgbToHex(Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)));\n    }\n    return palette;\n  };\n  const hslToRgb = (h, s, l) => {\n    let r, g, b;\n    if (s === 0) {\n      r = g = b = l;\n    } else {\n      const hue2rgb = (p, q, t) => {\n        if (t < 0) t += 1;\n        if (t > 1) t -= 1;\n        if (t < 1 / 6) return p + (q - p) * 6 * t;\n        if (t < 1 / 2) return q;\n        if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n        return p;\n      };\n      const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n      const p = 2 * l - q;\n      r = hue2rgb(p, q, h + 1 / 3);\n      g = hue2rgb(p, q, h);\n      b = hue2rgb(p, q, h - 1 / 3);\n    }\n    return [r, g, b];\n  };\n  const analyzeImage = async imageDataUrl => {\n    setIsAnalyzing(true);\n    setError(null);\n    let canvas = null;\n    try {\n      const img = new Image();\n      img.src = imageDataUrl;\n      await new Promise((resolve, reject) => {\n        img.onload = resolve;\n        img.onerror = () => reject(new Error('Failed to load image'));\n      });\n      canvas = document.createElement('canvas');\n      canvas.width = img.width;\n      canvas.height = img.height;\n      const ctx = canvas.getContext('2d');\n      if (!ctx) {\n        throw new Error('Failed to get canvas context');\n      }\n      ctx.drawImage(img, 0, 0);\n      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n      const pixels = [];\n\n      // Sample every 4th pixel for better performance\n      for (let i = 0; i < imageData.data.length; i += 16) {\n        pixels.push({\n          r: imageData.data[i],\n          g: imageData.data[i + 1],\n          b: imageData.data[i + 2]\n        });\n      }\n\n      // Calculate average brightness and saturation\n      let totalBrightness = 0;\n      let totalSaturation = 0;\n      const dominantHues = [];\n      pixels.forEach(pixel => {\n        const hsl = rgbToHsl(pixel.r, pixel.g, pixel.b);\n        totalBrightness += hsl.l;\n        totalSaturation += hsl.s;\n        dominantHues.push(hsl.h);\n      });\n      const avgBrightness = totalBrightness / pixels.length;\n      const avgSaturation = totalSaturation / pixels.length;\n      const undertone = determineUndertone(dominantHues);\n      const seasonType = determineSeasonType(undertone, avgBrightness, avgSaturation);\n\n      // Generate color palettes\n      const baseHue = dominantHues.reduce((a, b) => a + b, 0) / dominantHues.length;\n      const clothingColors = generateHarmonizedPalette(baseHue, undertone);\n      const makeupColors = generateHarmonizedPalette((baseHue + 180) % 360, undertone);\n      const palette = {\n        undertone,\n        seasonType,\n        clothing: clothingColors.map((color, index) => {\n          const rgb = hexToRgb(color) || {\n            r: 0,\n            g: 0,\n            b: 0\n          };\n          const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);\n          return {\n            color,\n            name: getColorName(hsl.h, hsl.s, hsl.l),\n            description: getColorDescription(index, undertone)\n          };\n        }),\n        makeup: makeupColors.map((color, index) => {\n          const rgb = hexToRgb(color) || {\n            r: 0,\n            g: 0,\n            b: 0\n          };\n          const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);\n          return {\n            color,\n            name: getColorName(hsl.h, hsl.s, hsl.l),\n            description: getMakeupDescription(index, undertone)\n          };\n        })\n      };\n      setColorPalette(palette);\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'An unknown error occurred';\n      setError(errorMessage);\n      console.error('Error analyzing image:', error);\n    } finally {\n      setIsAnalyzing(false);\n      if (canvas) {\n        // Clean up canvas\n        canvas.width = 0;\n        canvas.height = 0;\n      }\n    }\n  };\n  const hexToRgb = hex => {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? {\n      r: parseInt(result[1], 16),\n      g: parseInt(result[2], 16),\n      b: parseInt(result[3], 16)\n    } : null;\n  };\n  const getColorDescription = (index, undertone) => {\n    const descriptions = ['Perfect for statement pieces and focal points', 'Great for accessories and accent pieces', 'Ideal for layering and combining outfits', 'Excellent for seasonal transitions', 'Works well for everyday basics'];\n    return descriptions[index];\n  };\n  const getMakeupDescription = (index, undertone) => {\n    const descriptions = ['Perfect for bold lip colors', 'Ideal for eye shadows and liners', 'Great for blush and cheek colors', 'Suitable for highlighters and bronzers', 'Works well for natural everyday looks'];\n    return descriptions[index];\n  };\n  const onDrop = useCallback(acceptedFiles => {\n    const file = acceptedFiles[0];\n    const reader = new FileReader();\n    reader.onload = () => {\n      const dataUrl = reader.result;\n      setImage(dataUrl);\n      analyzeImage(dataUrl);\n    };\n    reader.readAsDataURL(file);\n  }, [analyzeImage]);\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive\n  } = useDropzone({\n    onDrop,\n    accept: {\n      'image/*': ['.jpeg', '.jpg', '.png']\n    },\n    multiple: false\n  });\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center',\n      minHeight: '100vh',\n      py: 4\n    },\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        width: '100%',\n        maxWidth: 1200,\n        mx: 'auto',\n        p: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h2\",\n        align: \"center\",\n        sx: {\n          mb: 1\n        },\n        children: \"MyHues\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        align: \"center\",\n        sx: {\n          mb: 6,\n          color: 'text.secondary',\n          maxWidth: 600,\n          mx: 'auto'\n        },\n        children: \"Discover your perfect color palette with AI-powered personalization\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        sx: {\n          mb: 4\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 11\n      }, this), !image && /*#__PURE__*/_jsxDEV(Paper, {\n        ...getRootProps(),\n        sx: {\n          p: 8,\n          mb: 4,\n          textAlign: 'center',\n          cursor: 'pointer',\n          transition: 'all 0.3s ease',\n          '&:hover': {\n            transform: 'translateY(-4px)',\n            boxShadow: theme => `0 12px 40px ${theme.palette.primary.main}25`\n          }\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          ...getInputProps()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(CloudUploadIcon, {\n          sx: {\n            fontSize: 48,\n            mb: 2,\n            color: 'primary.main'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          color: \"text.primary\",\n          gutterBottom: true,\n          children: isDragActive ? 'Drop your photo here...' : 'Upload a photo of yourself'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          color: \"text.secondary\",\n          children: isDragActive ? 'Let the magic begin!' : 'We\\'ll analyze your skin tone and create personalized color recommendations'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 11\n      }, this), isAnalyzing && /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          my: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n          size: 60,\n          thickness: 4,\n          sx: {\n            mb: 3\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          color: \"text.secondary\",\n          children: \"Analyzing your colors and creating personalized recommendations...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 11\n      }, this), image && !isAnalyzing && /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          flexDirection: {\n            xs: 'column',\n            md: 'row'\n          },\n          gap: 4,\n          alignItems: 'flex-start',\n          mt: 4\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            flex: 1,\n            maxWidth: {\n              md: '50%'\n            },\n            position: 'relative',\n            '&:hover .remove-button': {\n              opacity: 1\n            }\n          },\n          children: [/*#__PURE__*/_jsxDEV(IconButton, {\n            onClick: handleRemoveImage,\n            className: \"remove-button\",\n            sx: {\n              position: 'absolute',\n              top: 8,\n              right: 8,\n              backgroundColor: 'rgba(0,0,0,0.6)',\n              backdropFilter: 'blur(4px)',\n              opacity: 0,\n              transition: 'opacity 0.2s ease',\n              '&:hover': {\n                backgroundColor: 'rgba(0,0,0,0.8)'\n              }\n            },\n            children: /*#__PURE__*/_jsxDEV(ClearIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            component: \"img\",\n            src: image,\n            alt: \"Uploaded\",\n            sx: {\n              width: '100%',\n              height: 'auto',\n              borderRadius: 3,\n              boxShadow: theme => `0 8px 32px ${theme.palette.primary.main}15`,\n              maxHeight: '50vh',\n              objectFit: 'contain'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            flex: 1,\n            maxWidth: {\n              md: '50%'\n            }\n          },\n          children: colorPalette && /*#__PURE__*/_jsxDEV(ColorRecommendations, {\n            palette: colorPalette\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 32\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 308,\n    columnNumber: 5\n  }, this);\n};\n_s(ColorAnalyzer, \"SII+fZ2bsUaLCoIFAvxhYat03f0=\", false, function () {\n  return [useDropzone];\n});\n_c = ColorAnalyzer;\nexport default ColorAnalyzer;\nvar _c;\n$RefreshReg$(_c, \"ColorAnalyzer\");","map":{"version":3,"names":["React","useState","useCallback","Box","Typography","Paper","CircularProgress","IconButton","Alert","useDropzone","CloudUploadIcon","ClearIcon","ColorRecommendations","jsxDEV","_jsxDEV","ColorAnalyzer","_s","image","setImage","isAnalyzing","setIsAnalyzing","colorPalette","setColorPalette","error","setError","handleRemoveImage","rgbToHsl","r","g","b","max","Math","min","h","s","l","d","rgbToHex","map","x","hex","toString","length","join","getColorName","hue","determineUndertone","dominantHues","avgHue","reduce","a","determineSeasonType","undertone","brightness","saturation","generateHarmonizedPalette","baseHue","palette","hueStep","i","random","lightness","hslToRgb","push","round","hue2rgb","p","q","t","analyzeImage","imageDataUrl","canvas","img","Image","src","Promise","resolve","reject","onload","onerror","Error","document","createElement","width","height","ctx","getContext","drawImage","imageData","getImageData","pixels","data","totalBrightness","totalSaturation","forEach","pixel","hsl","avgBrightness","avgSaturation","seasonType","clothingColors","makeupColors","clothing","color","index","rgb","hexToRgb","name","description","getColorDescription","makeup","getMakeupDescription","errorMessage","message","console","result","exec","parseInt","descriptions","onDrop","acceptedFiles","file","reader","FileReader","dataUrl","readAsDataURL","getRootProps","getInputProps","isDragActive","accept","multiple","sx","display","flexDirection","alignItems","justifyContent","minHeight","py","children","maxWidth","mx","variant","align","mb","fileName","_jsxFileName","lineNumber","columnNumber","severity","textAlign","cursor","transition","transform","boxShadow","theme","primary","main","fontSize","gutterBottom","my","size","thickness","xs","md","gap","mt","flex","position","opacity","onClick","className","top","right","backgroundColor","backdropFilter","component","alt","borderRadius","maxHeight","objectFit","_c","$RefreshReg$"],"sources":["C:/Users/alfon/src/components/ColorAnalyzer.tsx"],"sourcesContent":["import React, { useState, useCallback } from 'react';\r\nimport { Box, Typography, Paper, CircularProgress, IconButton, Alert } from '@mui/material';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport CloudUploadIcon from '@mui/icons-material/CloudUpload';\r\nimport ClearIcon from '@mui/icons-material/Clear';\r\nimport ColorRecommendations from './ColorRecommendations.tsx';\r\n\r\ninterface ColorPalette {\r\n  clothing: Array<{\r\n    color: string;\r\n    name: string;\r\n    description: string;\r\n  }>;\r\n  makeup: Array<{\r\n    color: string;\r\n    name: string;\r\n    description: string;\r\n  }>;\r\n  seasonType: string;\r\n  undertone: string;\r\n}\r\n\r\ninterface RGB {\r\n  r: number;\r\n  g: number;\r\n  b: number;\r\n}\r\n\r\ninterface HSL {\r\n  h: number;\r\n  s: number;\r\n  l: number;\r\n}\r\n\r\nconst ColorAnalyzer: React.FC = () => {\r\n  const [image, setImage] = useState<string | null>(null);\r\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\r\n  const [colorPalette, setColorPalette] = useState<ColorPalette | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const handleRemoveImage = () => {\r\n    setImage(null);\r\n    setColorPalette(null);\r\n    setError(null);\r\n  };\r\n\r\n  const rgbToHsl = (r: number, g: number, b: number): HSL => {\r\n    r /= 255;\r\n    g /= 255;\r\n    b /= 255;\r\n\r\n    const max = Math.max(r, g, b);\r\n    const min = Math.min(r, g, b);\r\n    let h = 0;\r\n    let s = 0;\r\n    const l = (max + min) / 2;\r\n\r\n    if (max !== min) {\r\n      const d = max - min;\r\n      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n\r\n      switch (max) {\r\n        case r:\r\n          h = (g - b) / d + (g < b ? 6 : 0);\r\n          break;\r\n        case g:\r\n          h = (b - r) / d + 2;\r\n          break;\r\n        case b:\r\n          h = (r - g) / d + 4;\r\n          break;\r\n      }\r\n\r\n      h /= 6;\r\n    }\r\n\r\n    return { h: h * 360, s: s * 100, l: l * 100 };\r\n  };\r\n\r\n  const rgbToHex = (r: number, g: number, b: number): string => {\r\n    return '#' + [r, g, b].map(x => {\r\n      const hex = x.toString(16);\r\n      return hex.length === 1 ? '0' + hex : hex;\r\n    }).join('');\r\n  };\r\n\r\n  const getColorName = (h: number, s: number, l: number): string => {\r\n    // Basic color naming logic\r\n    if (l < 20) return 'Black';\r\n    if (l > 80) return 'White';\r\n    if (s < 20) return l > 50 ? 'Light Gray' : 'Dark Gray';\r\n\r\n    const hue = h;\r\n    if (hue >= 0 && hue < 30) return 'Red';\r\n    if (hue >= 30 && hue < 60) return 'Orange';\r\n    if (hue >= 60 && hue < 90) return 'Yellow';\r\n    if (hue >= 90 && hue < 150) return 'Green';\r\n    if (hue >= 150 && hue < 210) return 'Cyan';\r\n    if (hue >= 210 && hue < 270) return 'Blue';\r\n    if (hue >= 270 && hue < 330) return 'Purple';\r\n    return 'Red';\r\n  };\r\n\r\n  const determineUndertone = (dominantHues: number[]): string => {\r\n    const avgHue = dominantHues.reduce((a, b) => a + b, 0) / dominantHues.length;\r\n    return avgHue < 180 ? 'Warm' : 'Cool';\r\n  };\r\n\r\n  const determineSeasonType = (undertone: string, brightness: number, saturation: number): string => {\r\n    if (undertone === 'Warm') {\r\n      return brightness > 50\r\n        ? saturation > 50 ? 'Spring' : 'Spring-Summer'\r\n        : saturation > 50 ? 'Autumn' : 'Autumn-Winter';\r\n    } else {\r\n      return brightness > 50\r\n        ? saturation > 50 ? 'Summer' : 'Spring-Summer'\r\n        : saturation > 50 ? 'Winter' : 'Autumn-Winter';\r\n    }\r\n  };\r\n\r\n  const generateHarmonizedPalette = (baseHue: number, undertone: string): string[] => {\r\n    const palette: string[] = [];\r\n    const hueStep = undertone === 'Warm' ? 30 : 45;\r\n    \r\n    for (let i = 0; i < 5; i++) {\r\n      const hue = (baseHue + i * hueStep) % 360;\r\n      const saturation = 65 + Math.random() * 20;\r\n      const lightness = 45 + Math.random() * 25;\r\n      \r\n      const [r, g, b] = hslToRgb(hue / 360, saturation / 100, lightness / 100);\r\n      palette.push(rgbToHex(Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)));\r\n    }\r\n    \r\n    return palette;\r\n  };\r\n\r\n  const hslToRgb = (h: number, s: number, l: number): [number, number, number] => {\r\n    let r, g, b;\r\n\r\n    if (s === 0) {\r\n      r = g = b = l;\r\n    } else {\r\n      const hue2rgb = (p: number, q: number, t: number) => {\r\n        if (t < 0) t += 1;\r\n        if (t > 1) t -= 1;\r\n        if (t < 1/6) return p + (q - p) * 6 * t;\r\n        if (t < 1/2) return q;\r\n        if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;\r\n        return p;\r\n      };\r\n\r\n      const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n      const p = 2 * l - q;\r\n      r = hue2rgb(p, q, h + 1/3);\r\n      g = hue2rgb(p, q, h);\r\n      b = hue2rgb(p, q, h - 1/3);\r\n    }\r\n\r\n    return [r, g, b];\r\n  };\r\n\r\n  const analyzeImage = async (imageDataUrl: string) => {\r\n    setIsAnalyzing(true);\r\n    setError(null);\r\n    let canvas: HTMLCanvasElement | null = null;\r\n\r\n    try {\r\n      const img = new Image();\r\n      img.src = imageDataUrl;\r\n      await new Promise((resolve, reject) => {\r\n        img.onload = resolve;\r\n        img.onerror = () => reject(new Error('Failed to load image'));\r\n      });\r\n\r\n      canvas = document.createElement('canvas');\r\n      canvas.width = img.width;\r\n      canvas.height = img.height;\r\n      \r\n      const ctx = canvas.getContext('2d');\r\n      if (!ctx) {\r\n        throw new Error('Failed to get canvas context');\r\n      }\r\n\r\n      ctx.drawImage(img, 0, 0);\r\n      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n      const pixels: RGB[] = [];\r\n\r\n      // Sample every 4th pixel for better performance\r\n      for (let i = 0; i < imageData.data.length; i += 16) {\r\n        pixels.push({\r\n          r: imageData.data[i],\r\n          g: imageData.data[i + 1],\r\n          b: imageData.data[i + 2],\r\n        });\r\n      }\r\n\r\n      // Calculate average brightness and saturation\r\n      let totalBrightness = 0;\r\n      let totalSaturation = 0;\r\n      const dominantHues: number[] = [];\r\n\r\n      pixels.forEach(pixel => {\r\n        const hsl = rgbToHsl(pixel.r, pixel.g, pixel.b);\r\n        totalBrightness += hsl.l;\r\n        totalSaturation += hsl.s;\r\n        dominantHues.push(hsl.h);\r\n      });\r\n\r\n      const avgBrightness = totalBrightness / pixels.length;\r\n      const avgSaturation = totalSaturation / pixels.length;\r\n      const undertone = determineUndertone(dominantHues);\r\n      const seasonType = determineSeasonType(undertone, avgBrightness, avgSaturation);\r\n\r\n      // Generate color palettes\r\n      const baseHue = dominantHues.reduce((a, b) => a + b, 0) / dominantHues.length;\r\n      const clothingColors = generateHarmonizedPalette(baseHue, undertone);\r\n      const makeupColors = generateHarmonizedPalette((baseHue + 180) % 360, undertone);\r\n\r\n      const palette: ColorPalette = {\r\n        undertone,\r\n        seasonType,\r\n        clothing: clothingColors.map((color, index) => {\r\n          const rgb = hexToRgb(color) || { r: 0, g: 0, b: 0 };\r\n          const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);\r\n          return {\r\n            color,\r\n            name: getColorName(hsl.h, hsl.s, hsl.l),\r\n            description: getColorDescription(index, undertone),\r\n          };\r\n        }),\r\n        makeup: makeupColors.map((color, index) => {\r\n          const rgb = hexToRgb(color) || { r: 0, g: 0, b: 0 };\r\n          const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);\r\n          return {\r\n            color,\r\n            name: getColorName(hsl.h, hsl.s, hsl.l),\r\n            description: getMakeupDescription(index, undertone),\r\n          };\r\n        }),\r\n      };\r\n\r\n      setColorPalette(palette);\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'An unknown error occurred';\r\n      setError(errorMessage);\r\n      console.error('Error analyzing image:', error);\r\n    } finally {\r\n      setIsAnalyzing(false);\r\n      if (canvas) {\r\n        // Clean up canvas\r\n        canvas.width = 0;\r\n        canvas.height = 0;\r\n      }\r\n    }\r\n  };\r\n\r\n  const hexToRgb = (hex: string): RGB | null => {\r\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n    return result ? {\r\n      r: parseInt(result[1], 16),\r\n      g: parseInt(result[2], 16),\r\n      b: parseInt(result[3], 16)\r\n    } : null;\r\n  };\r\n\r\n  const getColorDescription = (index: number, undertone: string): string => {\r\n    const descriptions = [\r\n      'Perfect for statement pieces and focal points',\r\n      'Great for accessories and accent pieces',\r\n      'Ideal for layering and combining outfits',\r\n      'Excellent for seasonal transitions',\r\n      'Works well for everyday basics'\r\n    ];\r\n    return descriptions[index];\r\n  };\r\n\r\n  const getMakeupDescription = (index: number, undertone: string): string => {\r\n    const descriptions = [\r\n      'Perfect for bold lip colors',\r\n      'Ideal for eye shadows and liners',\r\n      'Great for blush and cheek colors',\r\n      'Suitable for highlighters and bronzers',\r\n      'Works well for natural everyday looks'\r\n    ];\r\n    return descriptions[index];\r\n  };\r\n\r\n  const onDrop = useCallback((acceptedFiles: File[]) => {\r\n    const file = acceptedFiles[0];\r\n    const reader = new FileReader();\r\n    reader.onload = () => {\r\n      const dataUrl = reader.result as string;\r\n      setImage(dataUrl);\r\n      analyzeImage(dataUrl);\r\n    };\r\n    reader.readAsDataURL(file);\r\n  }, [analyzeImage]);\r\n\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\r\n    onDrop,\r\n    accept: {\r\n      'image/*': ['.jpeg', '.jpg', '.png']\r\n    },\r\n    multiple: false,\r\n  });\r\n\r\n  return (\r\n    <Box sx={{\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      minHeight: '100vh',\r\n      py: 4,\r\n    }}>\r\n      <Box sx={{ width: '100%', maxWidth: 1200, mx: 'auto', p: 3 }}>\r\n        <Typography variant=\"h2\" align=\"center\" sx={{ mb: 1 }}>\r\n          MyHues\r\n        </Typography>\r\n        <Typography \r\n          variant=\"h6\" \r\n          align=\"center\" \r\n          sx={{ \r\n            mb: 6, \r\n            color: 'text.secondary',\r\n            maxWidth: 600,\r\n            mx: 'auto',\r\n          }}\r\n        >\r\n          Discover your perfect color palette with AI-powered personalization\r\n        </Typography>\r\n\r\n        {error && (\r\n          <Alert severity=\"error\" sx={{ mb: 4 }}>\r\n            {error}\r\n          </Alert>\r\n        )}\r\n        \r\n        {!image && (\r\n          <Paper\r\n            {...getRootProps()}\r\n            sx={{\r\n              p: 8,\r\n              mb: 4,\r\n              textAlign: 'center',\r\n              cursor: 'pointer',\r\n              transition: 'all 0.3s ease',\r\n              '&:hover': {\r\n                transform: 'translateY(-4px)',\r\n                boxShadow: (theme) => `0 12px 40px ${theme.palette.primary.main}25`,\r\n              },\r\n            }}\r\n          >\r\n            <input {...getInputProps()} />\r\n            <CloudUploadIcon sx={{ fontSize: 48, mb: 2, color: 'primary.main' }} />\r\n            <Typography variant=\"h6\" color=\"text.primary\" gutterBottom>\r\n              {isDragActive ? 'Drop your photo here...' : 'Upload a photo of yourself'}\r\n            </Typography>\r\n            <Typography variant=\"body1\" color=\"text.secondary\">\r\n              {isDragActive\r\n                ? 'Let the magic begin!'\r\n                : 'We\\'ll analyze your skin tone and create personalized color recommendations'}\r\n            </Typography>\r\n          </Paper>\r\n        )}\r\n\r\n        {isAnalyzing && (\r\n          <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', my: 8 }}>\r\n            <CircularProgress size={60} thickness={4} sx={{ mb: 3 }} />\r\n            <Typography variant=\"h6\" color=\"text.secondary\">\r\n              Analyzing your colors and creating personalized recommendations...\r\n            </Typography>\r\n          </Box>\r\n        )}\r\n\r\n        {image && !isAnalyzing && (\r\n          <Box sx={{ \r\n            display: 'flex', \r\n            flexDirection: { xs: 'column', md: 'row' }, \r\n            gap: 4, \r\n            alignItems: 'flex-start',\r\n            mt: 4\r\n          }}>\r\n            <Box \r\n              sx={{ \r\n                flex: 1, \r\n                maxWidth: { md: '50%' },\r\n                position: 'relative',\r\n                '&:hover .remove-button': {\r\n                  opacity: 1,\r\n                },\r\n              }}\r\n            >\r\n              <IconButton\r\n                onClick={handleRemoveImage}\r\n                className=\"remove-button\"\r\n                sx={{\r\n                  position: 'absolute',\r\n                  top: 8,\r\n                  right: 8,\r\n                  backgroundColor: 'rgba(0,0,0,0.6)',\r\n                  backdropFilter: 'blur(4px)',\r\n                  opacity: 0,\r\n                  transition: 'opacity 0.2s ease',\r\n                  '&:hover': {\r\n                    backgroundColor: 'rgba(0,0,0,0.8)',\r\n                  },\r\n                }}\r\n              >\r\n                <ClearIcon />\r\n              </IconButton>\r\n              <Box\r\n                component=\"img\"\r\n                src={image}\r\n                alt=\"Uploaded\"\r\n                sx={{\r\n                  width: '100%',\r\n                  height: 'auto',\r\n                  borderRadius: 3,\r\n                  boxShadow: (theme) => `0 8px 32px ${theme.palette.primary.main}15`,\r\n                  maxHeight: '50vh',\r\n                  objectFit: 'contain'\r\n                }}\r\n              />\r\n            </Box>\r\n            <Box sx={{ flex: 1, maxWidth: { md: '50%' } }}>\r\n              {colorPalette && <ColorRecommendations palette={colorPalette} />}\r\n            </Box>\r\n          </Box>\r\n        )}\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ColorAnalyzer; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}